<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <div id="app"></div>
    <script src="http://s1.bdstatic.com/r/www/cache/ecom/esl/2-1-4/esl.js"></script>
    <script>
        require.config({
            baseUrl: './src',
            packages: [
                {
                    name: 'snabbdom',
                    location: '../node_modules/snabbdom',
                    main: 'snabbdom'
                }
            ]
        });
        require(['Cola'], function (Cola) {
            Cola = Cola.default
            var instance = new Cola({
                el: '#app',
                data: {
                    name: 'musicode',
                    user: {
                        age: 10,
                    }
                },
                template: `
                  <div>
                    {{name}}
                    <button on-click="submit(@event, user.age)" style="font-weight: bold">
                      {{user.age}}
                    </button>
                    <input type="text" value="{{name}}" on-input="valueChange()">
                  </div>
                `,
                watchers: {
                    'user.age': function (newValue, oldValue) {
                        console.log(newValue, oldValue);
                    },
                    '*.age': function (newValue, oldValue, who) {
                        console.log(newValue, oldValue, who);
                    },
                    'user.*': function (newValue, oldValue, name) {
                        console.log(newValue, oldValue, name);
                    }
                },
                methods: {
                    submit: function (event, age) {
                        instance.set('user.age', age + 1);
                    },
                    valueChange: function (event) {
                        console.log(event)
                    }
                }
            });
        });
    </script>
</body>
</html>
