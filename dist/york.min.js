!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("York",[],t):"object"==typeof exports?exports.York=t():e.York=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u,a,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),s=o(f),l=n(2),p=o(l),d=n(3),h=n(4),v=n(30),y=n(31),m=n(8),b=n(11),E=n(10),g=n(32),w=n(33),_=n(35),O=n(43),T=r(O),A=n(44),x=r(A),j=n(45),k=r(j),L=n(46),P=r(L),C=n(48),I=r(C),S={},R={ref:T.default,lazy:x.default,event:k.default,model:P.default,component:I.default},N={},$={};e.exports=(a=u=function(){function e(t){i(this,e);var n=t.el,r=t.data,o=t.props,u=t.parent,a=t.replace,c=t.computed,f=t.template,l=t.watchers,y=t.components,_=t.directives,O=t.events,T=t.filters,A=t.partials;f=s.tag.test(f)?f:(0,w.find)(f).innerHTML,n=(0,E.isString)(n)?(0,w.find)(n):n,a||(n.innerHTML="<div></div>",n=n.firstChild);var x=this;u&&(x.$parent=u);var j={};(0,m.each)(p,function(e){j["on"+e]=e}),(0,m.each)(t,function(e,t){(0,E.isFunction)(e)&&!j[t]&&"data"!==t&&(x[t]=e)}),r=(0,E.isFunction)(r)?r.call(x):r,(0,E.isObject)(o)&&((0,E.isObject)(r)||(r={}),(0,m.extend)(r,o)),r&&(x.$data=r),(0,E.isObject)(y)&&(x.$components=y),(0,E.isObject)(_)&&(x.$directives=_),(0,E.isObject)(T)&&(x.$filters=T),(0,E.isObject)(A)&&(x.$partials=A),(0,E.isObject)(c)&&!function(){var e=x.$computedGetters={},t=x.$computedSetters={},n=x.$computedCache={},r=x.$computedStack=[],o=x.$computedWatchers={},i=x.$computedDeps={};(0,m.each)(c,function(u,a){var c=void 0,f=void 0,s=d.TRUE;if((0,E.isFunction)(u)?c=u:(0,E.isObject)(u)&&((0,m.has)(u,"cache")&&(s=u.cache),(0,E.isFunction)(u.get)&&(c=u.get),(0,E.isFunction)(u.set)&&(f=u.set)),c){var l=function(){if(s&&(0,m.has)(n,a))return n[a];r.push([]);var e=c.call(x),t=r.pop(),u=i[a];i[a]=t;var f=[],l=[];return(0,E.isArray)(u)?(0,b.each)((0,b.merge)(u,t),function(e){var n=(0,b.hasItem)(u,e),r=(0,b.hasItem)(t,e);n&&!r?l.push(e):!n&&r&&f.push(e)}):f=t,(0,b.each)(f,function(e){(0,E.isArray)(o[e])||(o[e]=[]),o[e].push(a)}),(0,b.each)(l,function(e){(0,b.removeItem)(o[e],a)}),n[a]=e,e};l.computed=d.TRUE,e[a]=l}f&&(t[a]=f.bind(x))})}(),x.$eventEmitter=new v.Emitter,(0,m.each)(j,function(e,n){(0,E.isFunction)(t[n])&&x.on(e,t[n])}),j=d.NULL,x.fire(p.INIT),(0,E.isObject)(O)&&(0,m.each)(O,function(e,t){(0,E.isFunction)(e)&&x.on(t,e)}),x.$watchEmitter=new v.Emitter,(0,E.isObject)(l)&&(0,m.each)(l,function(e,t){x.watch(t,e)}),x.fire(p.CREATE),x.$template=(0,h.parse)(f,function(e){return(0,g.get)(x,"partial",e)},function(e,t){(0,g.set)(x,"partial",e,t)}),x.fire(p.COMPILE),x.updateView(n)}return c(e,[{key:"get",value:function(e){var t=this.$data,n=this.$computedStack,r=this.$computedGetters;if((0,E.isArray)(n)){var o=(0,b.lastItem)(n);o&&o.push(e);var i=r[e];if(i)return i()}var u=(0,m.get)(t,e);if(u)return u.value}},{key:"set",value:function(e,t){var n=e;(0,E.isString)(e)&&(n={},n[e]=t),this.updateModel(n)&&this.updateView()}},{key:"on",value:function(e,t){this.$eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.$eventEmitter.once(e,t)}},{key:"off",value:function(e,t){this.$eventEmitter.off(e,t)}},{key:"fire",value:function(e,t,n){2===arguments.length&&t===d.TRUE&&(n=t,t=d.NULL);var r=this,o=(r.parent,r.$eventEmitter);if(!o.fire(e,t,r)){var i=r.parent;n&&i&&i.fire(e,t,n)}}},{key:"watch",value:function(e,t){this.$watchEmitter.on(e,t)}},{key:"watchOnce",value:function(e,t){this.$watchEmitter.once(e,t)}},{key:"toggle",value:function(e){this.set(e,!this.get(e))}},{key:"updateModel",value:function(e){var t=this,n=t.$data,r=t.$watchEmitter,o=t.$computedCache,i=t.$computedWatchers,u=t.$computedSetters,a=(0,E.isObject)(i),c=[],f=void 0,s=void 0;if((0,m.each)(e,function(e,r){if(s=t.get(r),e!==s){if(c.push({keypath:r,args:[e,s]}),a&&(0,E.isArray)(i[r])&&(0,b.each)(i[r],function(e){(0,m.has)(o,e)&&delete o[e]}),a&&(f=u[r]))return void f(e);(0,m.set)(n,r,e)}}),c.length)return(0,b.each)(c,function(e){var n=e.keypath,o=e.args;(0,b.each)((0,y.getWildcardMatches)(n),function(e){r.fire(e,(0,b.merge)(o,(0,y.getWildcardNames)(n,e)),t)})}),d.TRUE}},{key:"updateView",value:function(e){var t=this,n=t.$data,r=t.$filters,o=t.$template,i=t.$currentNode,u=t.$computedGetters,a={};(0,b.each)([N,r],function(e){(0,E.isObject)(e)&&(0,m.extend)(a,(0,g.bind)(t,e))}),(0,b.each)([n,u],function(e){(0,E.isObject)(e)&&(0,m.extend)(a,e)});var c=(0,_.create)((0,h.render)(o,a),t);i?(i=(0,_.patch)(i,c),t.fire(p.UDPATE)):(i=(0,_.patch)(e,c),t.$el=i.elm,t.fire(p.ATTACH)),t.$currentNode=i}},{key:"create",value:function(t,n){return t=(0,m.extend)({},t,n),t.parent=this,new e(t)}},{key:"dispose",value:function(){this.fire(p.DETACH)}}]),e}(),u.components=S,u.directives=R,u.filters=N,u.partials=$,u.component=(0,g.magic)(S),u.directive=(0,g.magic)(R),u.filter=(0,g.magic)(N),u.partial=(0,g.magic)($),a)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.componentName=/[-A-Z]/,t.tag=/<[^>]+>/,t.selfClosingTagName=/input|img|br/i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT="init",t.CREATE="create",t.COMPILE="compile",t.ATTACH="attach",t.UPDATE="update",t.DETACH="detach"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.TRUE=!0,t.FALSE=!1);t.NULL=null,t.debug=n,t.win=window,t.doc=document,t.noop=function(){}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){var n=new A.default(Q),r=new v.default(t),o=[],i=function(e){return u(e).children},a=function(e){e.render(n,r,o,i)};e.name===Q?(0,V.each)(e.children,a):a(e);var c=n.children;if(1!==c.length||c[0].type!==B.ELEMENT)throw new Error("组件有且只能有一个根元素");return c[0]}function u(e,t,n){var r=c.templateParseCache;if(r[e])return r[e];for(var o=new m.default(e),i=new m.default,u=new A.default(Q),a=u,f=[],l=void 0,h=void 0,v=void 0,y=void 0,b=void 0,g=void 0,_=void 0,O=function(e){f.push(a),a=e},T=function(){return a=f.pop()},x=function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"addChild",i=r.name,u=r.type,c=r.content,f=r.children;switch(u){case B.TEXT:if((0,W.isBreakLine)(c))return;if(!(c=(0,W.trimBreakline)(c)))return;r.content=c;break;case B.ATTRIBUTE:a.attrs&&(o="addAttr");break;case B.DIRECTIVE:a.directives&&(o="addDirective");break;case B.IMPORT:return void(0,V.each)(t(i).children,function(t){e(t)});case B.PARTIAL:return n(i,r),void O(r)}a[o](r),f&&O(r)},j=function(e,t){for(i.reset(e);i.hasNext();){if(e=i.nextBefore(X),i.nextAfter(X),e){if(t&&(a.type===B.ATTRIBUTE&&(a.children.length?(g=e.match(q))&&(g[1]&&x(new F.default(g[1])),e=e.replace(q,""),T()):Z.test(e)?e=e.replace(Z,""):T()),a.type!==B.ATTRIBUTE)){for(;g=G.exec(e);)e=e.substr(g.index+g[0].length),h=g[1],x(h.startsWith(s.DIRECTIVE_PREFIX)||h.startsWith(s.DIRECTIVE_EVENT_PREFIX)?new w.default(h):new E.default(h)),(0,D.isString)(g[3])?(x(new F.default(g[3])),e&&T()):g[2]||T();e=""}e&&x(new F.default(e))}e=i.nextBefore(Y),i.nextAfter(Y),e&&("/"===e.charAt(0)?T():("{"===e.charAt(0)&&"}"===i.charAt(0)&&i.forward(1),(0,V.each)(J,function(n){if(n.test(e))return l=n.create(e,T),t&&l.type===B.EXPRESSION&&a.type!==B.ATTRIBUTE&&(l=new E.default(l)),x(l),d.FALSE})))}};o.hasNext()&&(v=o.nextBefore(z),v.trim()&&j(v),"<"===o.charAt(0));)if(_=o.pos,"/"===o.charAt(1)){if(v=o.nextAfter(z),h=v.substr(2),">"!==o.charAt(0))return(0,W.parseError)(e,"结束标签缺少 >",_);if(h!==a.name)return(0,W.parseError)(e,"开始标签和结束标签匹配失败",_);T(),o.forward(1)}else{if(v=o.nextAfter(z),h=v.substr(1),y=p.componentName.test(h),b=y||p.selfClosingTagName.test(h),x(new A.default(y?"div":h,y?h:"")),v=o.nextBefore(K),v&&j(v,d.TRUE),v=o.nextAfter(K),!v)return(0,W.parseError)(e,"标签缺少 >",_);(y||b)&&T()}return f.length?(0,W.parseError)(e,"节点没有正确的结束",_):(r[e]=u,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.render=i,t.parse=u;var a=n(5),c=o(a),f=n(6),s=o(f),l=n(1),p=o(l),d=n(3),h=n(7),v=r(h),y=n(12),m=r(y),b=n(13),E=r(b),g=n(17),w=r(g),_=n(18),O=r(_),T=n(19),A=r(T),x=n(20),j=r(x),k=n(21),L=r(k),P=n(22),C=r(P),I=n(24),S=r(I),R=n(25),N=r(R),$=n(26),M=r($),U=n(23),F=r(U),B=n(14),D=n(10),V=n(11),W=n(27),H=n(16),X=/\{\{\s*/,Y=/\s*\}\}/,z=/<(?:\/)?[a-z]\w*/i,K=/(?:\/)?>/,q=/^([^"']*)["']/,G=/([-:@a-z0-9]+)(?:=(["'])(?:([^'"]*))?)?/i,Z=/^=["']/,J=[{test:function(e){return e.startsWith(s.EACH)},create:function(e){var t=e.substr(s.EACH.length).trim().split(":"),n=t[0].trim(),r=void 0;return t[1]&&(r=t[1].trim()),new O.default(n,r)}},{test:function(e){return e.startsWith(s.IMPORT)},create:function(e){var t=e.substr(s.IMPORT.length).trim();if(t)return new N.default(t)}},{test:function(e){return e.startsWith(s.PARTIAL)},create:function(e){var t=e.substr(s.PARTIAL.length).trim();if(t)return new M.default(t);throw new Error("模板片段缺少名称")}},{test:function(e){return e.startsWith(s.IF)},create:function(e){var t=e.substr(s.IF.length).trim();if(t)return new S.default((0,H.parse)(t));throw new Error("if 缺少条件")}},{test:function(e){return e.startsWith(s.ELSE_IF)},create:function(e,t){var n=e.substr(s.ELSE_IF.length);if(n)return t(),new L.default((0,H.parse)(n));throw new Error("else if 缺少条件")}},{test:function(e){return e.startsWith(s.ELSE)},create:function(e,t){return t(),new j.default}},{test:function(e){return d.TRUE},create:function(e){var t=d.TRUE;return e.startsWith("{")&&(t=d.FALSE,e=e.substr(1)),new C.default((0,H.parse)(e),t)}}],Q="root"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.templateParseCache={},t.expressionParseCache={},t.expressionCompileCache={},t.keypathNormalizeCache={},t.keypathWildcardMatchesCache={}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IF="#if",t.ELSE="else",t.ELSE_IF="else if",t.EACH="#each",t.PARTIAL="#partial",t.IMPORT=">",t.DIRECTIVE_PREFIX="@",t.DIRECTIVE_EVENT_PREFIX="on-",t.SPECIAL_EVENT="$event",t.SPECIAL_KEYPATH="$keypath"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8);e.exports=function(){function e(t,n){r(this,e),this.data=t,this.parent=n,this.cache={this:t}}return o(e,[{key:"push",value:function(t){return new e(t,this)}},{key:"set",value:function(e,t){var n=this.data,r=this.cache;if((0,i.has)(r,e)&&delete r[e],e.indexOf(".")>0){var o=e.split("."),u=o.pop(),a=(0,i.get)(n,o.join("."));a&&(a.value[u]=t)}else n[e]=t}},{key:"get",value:function(e){var t=this,n=t,r=n.cache;if(!(0,i.has)(r,e))for(var o=void 0;t;){if(o=(0,i.get)(t.data,e)){r[e]=o.value;break}t=t.parent}return r[e]}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return Object.keys(e)}function i(e,t){(0,v.each)(o(e),function(n){return t(e[n],n)})}function u(e){return o(e).length}function a(e,t){return e.hasOwnProperty(t)}function c(){for(var e=arguments,t=e[0],n=1,r=e.length;n<r;n++)(0,h.isObject)(e[n])&&i(e[n],function(e,n){t[n]=e});return t}function f(e,t){if(t=(0,p.default)(t),a(e,t))return{value:e[t]};if(t.indexOf(".")>0)for(var n=t.split("."),r=0,o=n.length;r<o&&e;r++)if(r<o-1)e=e[n[r]];else if(a(e,n[r]))return{value:e[n[r]]}}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.TRUE;if(t=(0,p.default)(t),t.indexOf(".")>0){var o=e,i=t.split("."),u=i.pop();(0,v.each)(i,function(t,n){if(e[t])e=e[t];else{if(!r)return e=d.NULL,d.FALSE;e=e[t]={}}}),e&&e!==o&&(e[u]=n)}else e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.keys=o,t.each=i,t.count=u,t.has=a,t.extend=c,t.get=f,t.set=s;var l=n(9),p=r(l),d=n(3),h=n(10),v=n(11)},function(e,t,n){"use strict";var r=n(10);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,r.isString)(e)?e:(0,r.isNumeric)(e)?""+e:t}},function(e,t,n){"use strict";function r(e,t){return d.call(e).toLowerCase()==="[object "+t+"]"}function o(e){return"function"==typeof e}function i(e){return r(e,"array")}function u(e){return e?"object"===("undefined"==typeof e?"undefined":l(e)):p.FALSE}function a(e){return r(e,"string")}function c(e){return r(e,"number")}function f(e){return r(e,"boolean")}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isFunction=o,t.isArray=i,t.isObject=u,t.isString=a,t.isNumber=c,t.isBoolean=f,t.isNumeric=s;var p=n(3),d=Object.prototype.toString},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.length;n<r&&t(e[n],n)!==p.FALSE;n++);}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.NULL;return e.reduce(t,n)}function i(){var e=[],t=function(t){e.push(t)};return r(arguments,function(e){r(e,t)}),e}function u(e){try{}catch(e){return[]}return(0,d.isArray)(e)?e:h.call(e)}function a(e,t){var n={};return r(e,function(e){n[e[t]]=e}),n}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.TRUE;if(n)return e.indexOf(t);var o=-1;return r(e,function(e,n){if(t==e)return o=n,p.FALSE}),o}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.TRUE;return c(e,t,n)>=0}function s(e){return e[e.length-1]}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.TRUE,r=c(e,t,n);r>=0&&e.splice(r,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.each=r,t.reduce=o,t.merge=i,t.toArray=u,t.toObject=a,t.indexOf=c,t.hasItem=f,t.lastItem=s,t.removeItem=l;var p=n(3),d=n(10),h=Array.prototype.slice},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.exports=function(){function e(t){n(this,e),this.reset(t)}return r(e,[{key:"reset",value:function(e){this.pos=0,this.tail=e}},{key:"hasNext",value:function(){return this.tail}},{key:"nextAfter",value:function(e){var t=this.tail,n=t.match(e);if(!n||n.index)return"";var r=n[0];return this.forward(r.length),r}},{key:"nextBefore",value:function(e){var t=(this.pos,this.tail),n=t.match(e);if(n){var r=n.index;if(!r)return"";var o=t.substr(0,r);return this.forward(r),o}return this.forward(t.length),t}},{key:"forward",value:function(e){this.pos+=e,this.tail=this.tail.substr(e)}},{key:"charAt",value:function(e){return this.tail[e]}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=c.ATTRIBUTE,n.name=e,n}return u(t,e),a(t,[{key:"render",value:function(e,n,r,o){var i=this.name;i.type===c.EXPRESSION&&(i=i.execute(n));var u=new t(i);u.keypath=r.join("."),e.addAttr(u),this.renderChildren(u,n,r,o)}}]),t}(s.default)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IF=1,t.ELSE_IF=2,t.ELSE=3,t.EACH=4,t.PARTIAL=5,t.IMPORT=6,t.EXPRESSION=7,t.DIRECTIVE=8,t.ELEMENT=9,t.ATTRIBUTE=10,t.TEXT=11},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u=n(11),a=n(16),c=n(14);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.TRUE;r(this,e),t&&(this.children=[])}return o(e,[{key:"addChild",value:function(e){var t=this.children;if(e.type===c.TEXT){var n=(0,u.lastItem)(t);if(n&&n.type===c.TEXT)return void(n.content+=e.content)}t.push(e)}},{key:"getValue",value:function(){var e=this.children;return e[0]?e[0].content:i.TRUE}},{key:"execute",value:function(e){return(0,a.execute)((0,a.compile)(this.expr),e.data,function(t){return e.get(t)})}},{key:"render",value:function(){}},{key:"renderChildren",value:function(e,t,n,r,o){(0,u.reduce)(o||this.children,function(o,i){return i.render(e,t,n,r,o)})}}]),e}()},function(e,t,n){"use strict";function r(e){return(0,x.keys)(e).sort(function(e,t){return t.length-e.length})}function o(e){return e>=48&&e<=57}function i(e){return 32===e||9===e}function u(e){return 36===e||95===e||e>=97&&e<=122||e>=65&&e<=90}function a(e){return u(e)||o(e)}function c(e,t){var n=void 0;return(0,A.each)(t,function(t){if(e.startsWith(t))return n=t,O.FALSE}),n}function f(e){throw new Error("Expression parse error: ["+e+"]")}function s(e,t,n){return{type:N,test:e,consequent:t,alternate:n}}function l(e,t,n){return{type:R,operator:t,left:n,right:e}}function p(e,t){return{type:S,operator:e,argument:t}}function d(e){return{type:k,value:e}}function h(e){return{type:P,name:e}}function v(){return{type:C}}function y(e,t){return{type:I,object:e,property:t}}function m(e){return{type:L,elements:e}}function b(e,t){return{type:$,arguments:t,callee:e}}function E(e){function t(t){return e.charCodeAt(t!=O.NULL?t:N)}function n(){for(;i(t());)N++}function r(){for(;o(t());)N++}function E(){var e=void 0,n=t();for(N++;N<R;)if(N++,t(N-1)===n){e=O.TRUE;break}if(!e)return f()}function g(){do N++;while(a(t()))}function w(){var n=N;return r(),t()===U&&(N++,r()),d(parseFloat(e.substring(n,N)))}function _(){var t=N;return E(),d(e.substring(t+1,N-1))}function A(){var t=N;return g(),z=e.substring(t,N),Z[z]?d(Z[z]):"this"===z?v():z?h(z):f()}function x(e){for(var n=[],r=void 0;N<R;)$=t(),$===e?(N++,r=O.TRUE):$===M?N++:n.push(S());return r?n:f()}function j(t){if(n(),z=c(e.substr(N),t))return N+=z.length,z}function k(){for(z=A();N<R;){if($=t(),$===D){N++,z=b(z,x(V));break}if($===U)N++,z=y(z,d(A().name));else{if($!==W)break;N++,z=y(z,I(H))}}return z}function L(){return n(),$=t(),$===F||$===B?_():o($)||$===U?w():$===W?(N++,m(x(H))):$===D?(N++,I(V)):u($)?k():(z=j(K),z?P(z):f())}function P(e){return z=L(),z?p(e,z):f()}function C(){var e=L(),t=j(G);if(!t)return e;for(var n=L(),r=[e,t,q[t],n];t=j(G);){if(r.length>3&&q[t]<r[r.length-2]&&r.push(l(r.pop(),(r.pop(),r.pop()),r.pop())),n=L(),!n)return f();r.push(t,q[t],n)}for(n=r.pop();r.length>1;)n=l(n,(r.pop(),r.pop()),r.pop());return n}function I(e){return z=S(),t()===e?(N++,z):f()}function S(){var e=C();if(n(),t()===X){N++;var r=C();if(n(),t()===Y){N++;var o=C();return n(),s(e,r,o)}return f()}return e}var R=e.length,N=0,$=void 0,z=void 0;if(!T.expressionParseCache[e]){var J=S();J.$raw=e,T.expressionParseCache[e]=J}return T.expressionParseCache[e]}function g(e){var t=void 0;return(0,j.isString)(e)?(t=e,e=E(t)):e&&(t=e.$raw),T.expressionCompileCache[t]||!function(){var n=[];_(e,{enter:function(e){e.type===P&&n.push(e.name)}});var r=new Function(n.join(", "),"return "+t);r.$arguments=n,T.expressionCompileCache[t]=r}(),T.expressionCompileCache[t]}function w(e,t,n){var r=e.$arguments.map(n);return e.apply(t,r)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,j.isFunction)(t.enter)||t.enter(e)!==O.FALSE){switch(e.type){case N:_(e.test,t),_(e.consequent,t),_(e.alternate,t);break;case R:_(e.left,t),_(e.right,t);break;case S:_(e.argument,t);break;case I:_(e.object,t),_(e.property,t);break;case I:_(e.object,t),_(e.property,t);break;case $:_(e.callee,t),(0,A.each)(e.arguments,function(e){_(e,t)});break;case L:(0,A.each)(e.elements,function(e){_(e,t)})}(0,j.isFunction)(t.leave)&&t.leave(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.CALL=t.CONDITIONAL=t.BINARY=t.UNARY=t.MEMBER=t.THIS=t.IDENTIFIER=t.ARRAY=t.LITERAL=void 0,t.parse=E,t.compile=g,t.execute=w,t.traverse=_;var O=n(3),T=n(5),A=n(11),x=n(8),j=n(10),k=t.LITERAL=1,L=t.ARRAY=2,P=t.IDENTIFIER=3,C=t.THIS=4,I=t.MEMBER=5,S=t.UNARY=6,R=t.BINARY=7,N=t.CONDITIONAL=8,$=t.CALL=9,M=44,U=46,F=39,B=34,D=40,V=41,W=91,H=93,X=63,Y=58,z={"+":O.TRUE,"-":O.TRUE,"!":O.TRUE,"~":O.TRUE},K=r(z),q={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},G=r(q),Z={true:O.TRUE,false:O.FALSE,null:O.NULL,undefined:void 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=c.DIRECTIVE,n.name=e,n}return u(t,e),a(t,[{key:"render",value:function(e,n,r,o){var i=new t(this.name);i.keypath=r.join("."),e.addDirective(i),this.renderChildren(i,n,r,o)}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f),l=n(10),p=n(11),d=n(8),h=n(6);e.exports=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type=c.EACH,r.name=e,r.index=n,r}return u(t,e),a(t,[{key:"render",value:function(e,t,n,r){var o=this,i=o.name,u=o.index,a=t.get(i),c=void 0;(0,l.isArray)(a)?c=p.each:(0,l.isObject)(a)&&(c=d.each),c&&(n.push(i),c(a,function(i,a){u&&t.set(u,a),n.push(a),t.set(h.SPECIAL_KEYPATH,n.join(".")),o.renderChildren(e,t.push(i),n,r),n.pop()}),n.pop())}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f),l=n(11);e.exports=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type=c.ELEMENT,r.name=e,r.custom=n,r.attrs=[],r.directives=[],r}return u(t,e),a(t,[{key:"addAttr",value:function(e){this.attrs.push(e)}},{key:"addDirective",value:function(e){this.directives.push(e)}},{key:"getAttributes",value:function(){var e={};return(0,l.each)(this.attrs,function(t){e[t.name]=t.getValue()}),e}},{key:"render",value:function(e,n,r,o){var i=this,u=new t(i.name,i.custom);u.keypath=r.join("."),e.addChild(u),i.renderChildren(u,n,r,o,i.attrs),i.renderChildren(u,n,r,o,i.directives),i.renderChildren(u,n,r,o)}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f);e.exports=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=c.ELSE,e}return u(t,e),a(t,[{key:"render",value:function(e,t,n,r,o){o&&this.renderChildren(e,t,n,r)}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=c.ELSE_IF,n.expr=e,n}return u(t,e),a(t,[{key:"render",value:function(e,t,n,r,o){if(o){if(!this.execute(t))return o;this.renderChildren(e,t,n,r)}}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(14),s=n(15),l=o(s),p=n(23),d=o(p),h=n(1),v=r(h),y=n(3),m=n(11),b=n(10);e.exports=function(e){function t(e,n){i(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,y.FALSE));return r.type=f.EXPRESSION,r.expr=e,r.safe=n,r}return a(t,e),c(t,[{key:"render",value:function(e,t,n,r){var o=this.execute(t);if(o==y.NULL&&(o=""),(0,b.isFunction)(o)&&o.computed&&(o=o()),!this.safe&&(0,b.isString)(o)&&v.tag.test(o))(0,m.each)(r(o),function(o){o.render(e,t,n,r)});else{var i=new d.default(o);i.render(e,t,n)}}}]),t}(l.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),f=n(15),s=r(f),l=n(3);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l.FALSE));return n.type=c.TEXT,n.content=e,n}return u(t,e),a(t,[{key:"render",value:function(e,n,r){var o=new t(this.content);o.keypath=r.join("."),e.addChild(o)}}]),t}(s.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),f=n(14),s=n(15),l=r(s);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=f.IF,n.expr=e,n}return u(t,e),a(t,[{key:"render",value:function(e,t,n,r){return this.execute(t)?void this.renderChildren(e,t,n,r):c.TRUE}}]),t}(l.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(14),c=n(15),f=r(c),s=n(3);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.FALSE));return n.type=a.IMPORT,n.name=e,n}return u(t,e),t}(f.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(14),c=n(15),f=r(c);e.exports=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=a.PARTIAL,n.name=e,n}return u(t,e),t}(f.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.indexOf("\n")>=0&&!e.trim()}function i(e){return e.replace(p,"").replace(d,"")}function u(e,t,n){if(n==a.NULL)t+=".";else{t+=", at line %d, col %d.";var r=(0,l.default)(e,n),o=r.line,i=r.col;t=(0,f.default)(t,o,i)}throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isBreakLine=o,t.trimBreakline=i,t.parseError=u;var a=n(3),c=n(28),f=r(c),s=n(29),l=r(s),p=/^[ \t]*\n/,d=/\n[ \t]*$/},function(e,t,n){"use strict";var r=n(3);e.exports=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=-1;return e.replace(/%s/g,function(e){return i++,n[i]!=r.NULL?n[i]:e})}},function(e,t,n){"use strict";var r=n(3),o=n(11);e.exports=function(e,t){var n=0,i=0,u=0;return(0,o.each)(e.split("\n"),function(e){n++,i=0;var o=e.length;return t>=u&&t<=u+o?(i=t-u,r.FALSE):void(u+=o)}),{line:n,col:i}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u=n(10),a=n(11),c=n(8),f=t.Event=function(){function e(t){r(this,e),t.type?(this.type=t.type,this.originalEvent=t):this.type=t}return o(e,[{key:"prevent",value:function(){if(!this.isPrevented){var e=this.originalEvent;e&&(0,u.isFunction)(e.preventDefault)&&e.preventDefault(),this.isPrevented=i.TRUE}}},{key:"stop",value:function(){if(!this.isStoped){var e=this.originalEvent;e&&(0,u.isFunction)(e.stopPropagation)&&e.stopPropagation(),this.isStoped=i.TRUE}}}]),e}();t.Emitter=function(){function e(){r(this,e),this.listeners={}}return o(e,[{key:"on",value:function(e,t){var n=this.listeners,r=n[e]||(n[e]=[]);r.push(t)}},{key:"once",value:function(e,t){var n=this;t.$once=function(){n.off(e,t),delete t.$once},n.on(e,t)}},{key:"off",value:function(e,t){var n=this.listeners;if(e==i.NULL)(0,c.each)(n,function(e,t){(0,u.isArray)(n[t])&&(n[t].length=0)});else{var r=n[e];(0,u.isArray)(r)&&(t==i.NULL?r.length=0:(0,a.removeItem)(r,t))}}},{key:"fire",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.NULL,r=this.listeners[e],o=void 0;return(0,u.isArray)(r)&&(0,a.each)(r,function(e){var r=void 0;r=(0,u.isArray)(t)?e.apply(n,t):t!=i.NULL?e.call(n,t):e.call(n);var a=e.$once;(0,u.isFunction)(a)&&a();var c=t&&t[0];if(c&&c instanceof f&&(r===i.FALSE?(c.prevent(),c.stop()):c.isStoped&&(r=i.FALSE)),r===i.FALSE)return o=i.TRUE,r}),o}},{key:"has",value:function(e,t){var n=this.listeners[e];return t==i.NULL?(0,u.isArray)(n)&&n.length>0:(0,u.isArray)(n)?(0,a.hasItem)(n,t):i.FALSE}}]),e}()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){var t=s.keypathNormalizeCache;return t[e]||(t[e]=e.indexOf("[")<0?e:i((0,p.parse)(e))),t[e]}function i(e){var t=[];do{var n=e,r=n.name,o=n.property;o?t.push(o.value):r&&t.push(r)}while(e=e.object);return t.reverse().join(".")}function u(e){var t=s.keypathWildcardMatchesCache;return t[e]||!function(){var n=[],r=o(e).split("."),i=function(e,t){return e?"*":r[t]};(0,l.each)(c(r.length),function(e){n.push(e.map(i).join("."))}),t[e]=n}(),t[e]}function a(e,t){var n=[];if(t.indexOf("*")<0)return n;var r=e.split(".");return(0,l.each)(t.split("."),function(e,t){"*"===e&&n.push(r[t])}),n}function c(e){for(var t,n,r,o=[],i=function(e){return 1==e},u=parseInt(new Array(e+1).join("1"),2),a=0;a<=u;a++){for(t=a.toString(2),t.length<e&&(t="0"+t),r=[],n=0;n<e;n++)r.push(i(t[n]));o.push(r)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=o,t.stringify=i,t.getWildcardMatches=u,t.getWildcardNames=a;var f=n(5),s=r(f),l=n(11),p=n(16)},function(e,t,n){"use strict";function r(e,t){var n={};return(0,c.each)(t,function(t,r){n[r]=t.bind(e)}),n}function o(e,t,n){return function(t,n){if(n)e[t]=n;else{if(!isObject(t))return e[t];(0,c.each)(t,function(t,n){e[n]=t})}}}function i(e,t,n){var r=t?t.split("."):[];n||(n=r.pop());var o=e.$data,i=void 0;do{if(r.push(n),t=r.join("."),i=(0,c.get)(o,t))return{keypath:t,value:i.value};r.splice(-2)}while(r.length||t.indexOf(".")>0)}function u(e,t,n){var r=t+"s",o="$"+r;if(e[o]&&(0,c.has)(e[o],n))return e[o][n];if((0,c.has)(e.constructor[r],n))return e.constructor[r][n];throw new Error(n+" "+t+" is not found.")}function a(e,t,n,r){var o="$"+t+"s";e[o]||(e[o]={}),e[o][n]=r}Object.defineProperty(t,"__esModule",{value:!0}),t.bind=r,t.magic=o,t.testKeypath=i,t.get=u,t.set=a;var c=n(8)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){e.addEventListener(t,n,l.FALSE)}function i(e,t,n){e.removeEventListener(t,n,l.FALSE)}function u(e){return e}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.doc;return t.querySelector(e)}function c(e,t,n){var r=e.$emitter||(e.$emitter=new p.Emitter);if(!r.has(t)){var i=function(t){var n=new p.Event(u(t,e));r.fire(n.type,n)};r[t]=i,o(e,t,i)}r.on(t,n)}function f(e,t,n){var r=e.$emitter,o=(0,h.keys)(r.listeners);r.off(t,n),(0,d.each)(o,function(t){r[t]&&!r.has(t)&&(i(e,t,r[t]),delete r[t])})}function s(e){var t={};return(0,v.isString)(e)&&!function(){var n=void 0,r=void 0,o=void 0;(0,d.each)(e.split(";"),function(e){e&&e.trim()&&(n=e.split(":"),2===n.length&&(r=n[0].trim(),o=n[1].trim(),r&&(t[(0,m.default)(r)]=o)))})}(),t}Object.defineProperty(t,"__esModule",{value:!0}),t.nativeAddEventListener=o,t.nativeRemoveEventListener=i,t.createEvent=u,t.find=a,t.on=c,t.off=f,t.parseStyle=s;var l=n(3),p=n(30),d=n(11),h=n(8),v=n(10),y=n(34),m=r(y)},function(e,t){"use strict";e.exports=function(e){return e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=0,r=y.DIRECTIVE_PREFIX,o=y.DIRECTIVE_EVENT_PREFIX,i=function e(t,n,r){if(n(t)!==E.FALSE){var o=[];return(0,T.isArray)(t.children)&&(0,w.each)(t.children,function(t){t=e(t,n,r),t!=E.NULL&&o.push(t)}),r(t,o)}};return i(e,function(e){if(n++,e.type===A.ATTRIBUTE||e.type===A.DIRECTIVE)return E.FALSE},function(e,i){if(n--,e.type===A.ELEMENT){var a=function(){var u={},a=[],c=void 0;e.custom?a.push({name:"component",node:e,directive:(0,O.get)(t,"directive","component")}):(0,_.each)(e.getAttributes(),function(e,t){"style"===t?c=(0,g.parseStyle)(e):u[t]=e}),(0,w.each)(e.directives,function(e){var n=e.name,i=void 0;n.startsWith(o)?(n=n.substr(o.length),i="event"):n=i=n.substr(r.length),a.push({name:n,node:e,directive:(0,O.get)(t,"directive",i)})});var f={attrs:u};return c&&(f.style=c),n&&!a.length||!function(){var e=(0,w.toObject)(a,"name"),n=function(n,r){(0,w.each)(a,function(o){(0,T.isFunction)(o.directive[r])&&o.directive[r]({el:n.elm,node:o.node,name:o.name,directives:e,instance:t})})};f.hook={insert:function(e){n(e,b.ATTACH)},update:function(e,t){n(t,b.UPDATE)},destroy:function(e){n(e,b.DETACH)}}}(),{v:(0,s.default)(e.name,f,i)}}();if("object"===("undefined"==typeof a?"undefined":u(a)))return a.v}else if(e.type===A.TEXT)return e.content})}Object.defineProperty(t,"__esModule",{value:!0}),t.patch=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.create=i;var a=n(36),c=o(a),f=n(40),s=o(f),l=n(41),p=o(l),d=n(42),h=o(d),v=n(6),y=r(v),m=n(2),b=r(m),E=n(3),g=n(33),w=n(11),_=n(8),O=n(32),T=n(10),A=n(14);t.patch=c.default.init([h.default,p.default])},function(e,t,n){"use strict";function r(e){return void 0===e}function o(e){return void 0!==e}function i(e,t){return e.key===t.key&&e.sel===t.sel}function u(e,t,n){var r,i,u={};for(r=t;r<=n;++r)i=e[r].key,o(i)&&(u[i]=r);return u}function a(e,t){function n(e){var n=e.id?"#"+e.id:"",r=e.className?"."+e.className.split(" ").join("."):"";return c(t.tagName(e).toLowerCase()+n+r,{},[],void 0,e)}function a(e,n){return function(){if(0===--n){var r=t.parentNode(e);t.removeChild(r,e)}}}function d(e,n){var r,i=e.data;o(i)&&o(r=i.hook)&&o(r=r.init)&&(r(e),i=e.data);var u,a=e.children,c=e.sel;if(o(c)){var s=c.indexOf("#"),p=c.indexOf(".",s),h=s>0?s:c.length,v=p>0?p:c.length,y=s!==-1||p!==-1?c.slice(0,Math.min(h,v)):c;if(u=e.elm=o(i)&&o(r=i.ns)?t.createElementNS(r,y):t.createElement(y),h<v&&(u.id=c.slice(h+1,v)),p>0&&(u.className=c.slice(v+1).replace(/\./g," ")),f.array(a))for(r=0;r<a.length;++r)t.appendChild(u,d(a[r],n));else f.primitive(e.text)&&t.appendChild(u,t.createTextNode(e.text));for(r=0;r<w.create.length;++r)w.create[r](l,e);r=e.data.hook,o(r)&&(r.create&&r.create(l,e),r.insert&&n.push(e))}else u=e.elm=t.createTextNode(e.text);return e.elm}function h(e,n,r,o,i,u){for(;o<=i;++o)t.insertBefore(e,d(r[o],u),n)}function v(e){var t,n,r=e.data;if(o(r)){for(o(t=r.hook)&&o(t=t.destroy)&&t(e),t=0;t<w.destroy.length;++t)w.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)v(e.children[n])}}function y(e,n,r,i){for(;r<=i;++r){var u,c,f,s=n[r];if(o(s))if(o(s.sel)){for(v(s),c=w.remove.length+1,f=a(s.elm,c),u=0;u<w.remove.length;++u)w.remove[u](s,f);o(u=s.data)&&o(u=u.hook)&&o(u=u.remove)?u(s,f):f()}else t.removeChild(e,s.elm)}}function m(e,n,o,a){for(var c,f,s,l,p=0,v=0,m=n.length-1,E=n[0],g=n[m],w=o.length-1,_=o[0],O=o[w];p<=m&&v<=w;)r(E)?E=n[++p]:r(g)?g=n[--m]:i(E,_)?(b(E,_,a),E=n[++p],_=o[++v]):i(g,O)?(b(g,O,a),g=n[--m],O=o[--w]):i(E,O)?(b(E,O,a),t.insertBefore(e,E.elm,t.nextSibling(g.elm)),E=n[++p],O=o[--w]):i(g,_)?(b(g,_,a),t.insertBefore(e,g.elm,E.elm),g=n[--m],_=o[++v]):(r(c)&&(c=u(n,p,m)),f=c[_.key],r(f)?(t.insertBefore(e,d(_,a),E.elm),_=o[++v]):(s=n[f],b(s,_,a),n[f]=void 0,t.insertBefore(e,s.elm,E.elm),_=o[++v]));p>m?(l=r(o[w+1])?null:o[w+1].elm,h(e,l,o,v,w,a)):v>w&&y(e,n,p,m)}function b(e,n,u){var a,c;o(a=n.data)&&o(c=a.hook)&&o(a=c.prepatch)&&a(e,n);var f=n.elm=e.elm,s=e.children,l=n.children;if(e!==n){if(!i(e,n)){var p=t.parentNode(e.elm);return f=d(n,u),t.insertBefore(p,f,e.elm),void y(p,[e],0,0)}if(o(n.data)){for(a=0;a<w.update.length;++a)w.update[a](e,n);a=n.data.hook,o(a)&&o(a=a.update)&&a(e,n)}r(n.text)?o(s)&&o(l)?s!==l&&m(f,s,l,u):o(l)?(o(e.text)&&t.setTextContent(f,""),h(f,null,l,0,l.length-1,u)):o(s)?y(f,s,0,s.length-1):o(e.text)&&t.setTextContent(f,""):e.text!==n.text&&t.setTextContent(f,n.text),o(c)&&o(a=c.postpatch)&&a(e,n)}}var E,g,w={};for(r(t)&&(t=s),E=0;E<p.length;++E)for(w[p[E]]=[],g=0;g<e.length;++g)void 0!==e[g][p[E]]&&w[p[E]].push(e[g][p[E]]);return function(e,o){var u,a,c,f=[];for(u=0;u<w.pre.length;++u)w.pre[u]();for(r(e.sel)&&(e=n(e)),i(e,o)?b(e,o,f):(a=e.elm,c=t.parentNode(a),d(o,f),null!==c&&(t.insertBefore(c,o.elm,t.nextSibling(a)),y(c,[e],0,0))),u=0;u<f.length;++u)f[u].data.hook.insert(f[u]);for(u=0;u<w.post.length;++u)w.post[u]();return o}}var c=n(37),f=n(38),s=n(39),l=c("",{},[],void 0,void 0),p=["create","update","remove","destroy","pre","post"];e.exports={init:a}},function(e,t){"use strict";e.exports=function(e,t,n,r,o){var i=void 0===t?void 0:t.key;return{sel:e,data:t,children:n,text:r,elm:o,key:i}}},function(e,t){"use strict";e.exports={array:Array.isArray,primitive:function(e){return"string"==typeof e||"number"==typeof e}}},function(e,t){"use strict";function n(e){return document.createElement(e)}function r(e,t){return document.createElementNS(e,t)}function o(e){return document.createTextNode(e)}function i(e,t,n){e.insertBefore(t,n)}function u(e,t){e.removeChild(t)}function a(e,t){e.appendChild(t)}function c(e){return e.parentElement}function f(e){return e.nextSibling}function s(e){return e.tagName}function l(e,t){e.textContent=t}e.exports={createElement:n,createElementNS:r,createTextNode:o,appendChild:a,removeChild:u,insertBefore:i,parentNode:c,nextSibling:f,tagName:s,setTextContent:l}},function(e,t,n){"use strict";function r(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(var o=0;o<t.length;++o)r(t[o].data,t[o].children,t[o].sel)}var o=n(37),i=n(38);e.exports=function(e,t,n){var u,a,c,f={};if(void 0!==n?(f=t,i.array(n)?u=n:i.primitive(n)&&(a=n)):void 0!==t&&(i.array(t)?u=t:i.primitive(t)?a=t:f=t),i.array(u))for(c=0;c<u.length;++c)i.primitive(u[c])&&(u[c]=o(void 0,void 0,void 0,u[c]));return"s"===e[0]&&"v"===e[1]&&"g"===e[2]&&r(f,u,e),o(e,f,u,a,void 0)}},function(e,t){"use strict";function n(e,t,n){a(function(){e[t]=n})}function r(e,t){var r,o,i=t.elm,u=e.data.style,a=t.data.style;if(u||a){u=u||{},a=a||{};var c="delayed"in u;for(o in u)a[o]||(i.style[o]="");for(o in a)if(r=a[o],"delayed"===o)for(o in a.delayed)r=a.delayed[o],c&&r===u.delayed[o]||n(i.style,o,r);else"remove"!==o&&r!==u[o]&&(i.style[o]=r)}}function o(e){var t,n,r=e.elm,o=e.data.style;if(o&&(t=o.destroy))for(n in t)r.style[n]=t[n]}function i(e,t){var n=e.data.style;if(!n||!n.remove)return void t();var r,o,i=e.elm,u=0,a=n.remove,c=0,f=[];for(r in a)f.push(r),i.style[r]=a[r];o=getComputedStyle(i);for(var s=o["transition-property"].split(", ");u<s.length;++u)f.indexOf(s[u])!==-1&&c++;i.addEventListener("transitionend",function(e){e.target===i&&--c,0===c&&t()})}var u="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,a=function(e){u(function(){u(e)})};e.exports={create:r,update:r,destroy:o,remove:i}},function(e,t){"use strict";function n(e,t){var n,o,u,a,c=t.elm,f=e.data.attrs,s=t.data.attrs;if(f||s){f=f||{},s=s||{};for(n in s)o=s[n],u=f[n],u!==o&&(!o&&i[n]?c.removeAttribute(n):(a=n.split(":"),a.length>1&&r.hasOwnProperty(a[0])?c.setAttributeNS(r[a[0]],n,o):c.setAttribute(n,o)));for(n in f)n in s||c.removeAttribute(n)}}for(var r={xlink:"http://www.w3.org/1999/xlink"},o=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],i=Object.create(null),u=0,a=o.length;u<a;u++)i[o[u]]=!0;e.exports={create:n,update:n}},function(e,t,n){"use strict";var r=n(3),o=n(32);e.exports={attach:function(e){var t=e.el,n=e.node,r=e.instance,i=(e.directives,t.$component),u=n.getValue();i&&u&&((0,o.set)(r,"ref",u,i),t.$ref=u)},detach:function(e){var t=e.el,n=e.instance;t.$ref&&(delete n.$refs[t.$ref],t.$ref=r.NULL)}}},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(33),u=n(3),a=n(11),c=n(31),f=n(32),s=n(16),l=n(6),p=r(l);e.exports={attach:function(e){var t=e.el,n=e.name,r=e.node,l=e.instance,d=void 0,h=r.getValue().trim();if(h.indexOf("(")>0?!function(){var e=(0,s.parse)(h);e.type===s.CALL&&(d=function(t){var n=[].concat(o(e.arguments));n.length?n=n.map(function(e){var n=e.name,o=e.type;if(o===s.LITERAL)return e.value;if(o===s.IDENTIFIER){if(n===p.SPECIAL_EVENT)return t;if(n===p.SPECIAL_KEYPATH)return r.keypath}else o===s.MEMBER&&(n=(0,c.stringify)(e));var i=(0,f.testKeypath)(l,r.keypath,n);return i?i.value:void 0}):n.push(t),l[e.callee.name].apply(l,n)})}():d=function(){var e=arguments;l.fire(h,e.length?(0,a.toArray)(e):u.NULL)},d){var v=t.$component;v?v.on(n,d):(0,i.on)(t,n,d),t["$"+n]=d}},detach:function(e){var t=e.el,n=e.name,r=(e.node,"$"+n);if(t[r]){var o=t.$component;o?o.off(n,t[r]):(0,i.off)(t,n,t[r]),t[r]=u.NULL}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(33),u=n(3),a=n(32),c=n(11),f=n(10),s=n(47),l=r(s),p=["text","number","url","email","search"],d={normal:{set:function(e){var t=e.el,n=e.keypath,r=e.instance;t.value=r.get(n)},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;r.set(n,t.value)}},radio:{set:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked=t.value==r.get(n)},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked&&r.set(n,t.value)}},checkbox:{set:function(e){var t=e.el,n=e.keypath,r=e.instance,o=r.get(n);t.checked=(0,f.isArray)(o)?(0,c.hasItem)(o,t.value,u.FALSE):!!o},sync:function(e){var t=e.el,n=e.keypath,r=e.instance,i=r.get(n);(0,f.isArray)(i)?(t.checked?i.push(t.value):(0,c.removeItem)(i,t.value,u.FALSE),r.set(n,[].concat(o(i)))):r.set(n,t.checked)}}};e.exports={attach:function(e){var t=e.el,n=e.node,r=e.instance,o=e.directives,u="change",s=void 0,h=void 0,v=t.type,y=t.tagName;if("INPUT"===y&&(0,c.hasItem)(p,v)||"TEXTAREA"===y){var m=o.lazy;m?(h=m.node.getValue(),(0,f.isNumeric)(h)&&h>=0&&(u="input",s=h)):u="input"}h=n.getValue();var b=(0,a.testKeypath)(r,n.keypath,h);if(!b)throw new Error("不能双向绑定到 "+E);var E=b.keypath,g=d[v]||d.normal,w={el:t,keypath:E,instance:r};g.set(w),r.watch(E,function(){g.set(w)});var _=function(){g.sync(w)};s&&(_=(0,l.default)(_,s)),t.$model={eventName:u,eventListener:_},(0,i.on)(t,u,_)},detach:function(e){var t=e.el,n=t.$model;(0,i.off)(t,n.eventName,n.eventListener),t.$model=u.NULL}}},function(e,t,n){"use strict";var r=n(3),o=n(11);e.exports=function(e,t,n){function i(n){a=setTimeout(function(){a=r.NULL,u=Date.now(),e.apply(r.NULL,(0,o.toArray)(n))},t)}var u=void 0,a=void 0;return function(){n&&u>0&&Date.now()-u<t&&(clearTimeout(a),a=r.NULL),a||i(arguments)}}},function(e,t,n){"use strict";var r=n(3),o=n(32);e.exports={attach:function(e){var t=e.el,n=e.node,i=e.instance;t.$component=i.create((0,o.get)(i,"component",n.custom),{el:t,props:n.getAttributes(),replace:r.TRUE})},update:function(e){var t=e.el,n=e.node;t.$component.set(n.getAttributes())},detach:function(e){var t=e.el;t.$component.dispose(),t.$component=r.NULL}}}])});